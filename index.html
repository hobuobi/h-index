<!DOCTYPE html>

<html>
    <head>
        <title>H-INDEX TEST</title>
        <!-- CS -->
        <link href="https://fonts.googleapis.com/css?family=Roboto:300" rel="stylesheet">
        <link rel='stylesheet' href='css/main.css'>
        <!-- JS -->
        <script src="https://use.fontawesome.com/d416f742e4.js"></script>
        <script
		src="https://code.jquery.com/jquery-3.2.1.min.js"
		integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
		crossorigin="anonymous"></script>
    </head>
    <body>
        <h1>H-INDEX SURVEY</h1>
        <h3>A brief quantitative study on hookup culture and its social factors/trends.</h3>
        <hr />
        <form>
            <div id='bio-cont'>
                <ul id='bio' class='questions'>
                    <h2>Part 1 - Biographical Data</h2>
                    <p>Please provide a little bit of information about yourself.</p>
                    <li>
                        Age?
                        <input type='text' class='numerical' placeholder='age' />
                    </li>
                    <li>
                        Gender?
                        <select>
                            <option value='male'>Male</option>
                            <option value='female'>Female</option>
                            <option value='trans'>Transexual</option>
                            <option value='non-binary'>Non-binary</option>
                        </select>
                    </li>
                    <li>
                        Sexual Orientation?
                        <select>
                            <option value='hetero'>Heterosexual</option>
                            <option value='homo'>Homosexual</option>
                            <option value='bi'>Bisexual</option>
                            <option value='queer'>Queer</option>
                            <option value='ace'>Asexual</option>
                        </select>
                    </li>
                    <li>
                        What is your definition of a hookup?
                        <br>
                        <input type='text' class='long-form' placeholder='Define a hookup in your own words.' />
                    </li>
                </ul>
                <button type='button' id='next-section' disabled>Next Section</button>
            </div>
            <div id='partner-cont'>
                <h2>Part 2 - Partner Encounters</h2>
                <p>When filling this out, make sure to only include people who you have never been in a relationship with. Remember, this is totally anonymous.</p>
                <ul id='partners' class='questions'>   
                    <li>
                        <i class="fa fa-times-circle cancel" aria-hidden="true"></i>
                        Partner 1
                        <input class='encounters numerical' type='text' placeholder='#' maxlength='2' />
                    </li>
                </ul>
                <button type='button' id='partners-add'>Add Partner</button>
                <button type='button' id='partners-submit'>Submit</button>
            </div>
        </form>
    </body>
    <script src="https://www.gstatic.com/firebasejs/4.3.1/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.3.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.3.1/firebase-database.js"></script>
    <script>
    // Initialize Firebase
    var config = {
        apiKey: "AIzaSyBcWNQebmbmIx5166SgVoYmnE1XjbObQBw",
        authDomain: "h-index.firebaseapp.com",
        databaseURL: "https://h-index.firebaseio.com",
        projectId: "h-index",
        storageBucket: "",
        messagingSenderId: "16761998322"
    };
    firebase.initializeApp(config);
    </script>
    <script>
        var db = firebase.database();
        var partnerNumber = 1;
        applyBehaviors();
        $('#next-section').click(function(){
            $(this).parent().animate({
                'opacity': 0
            },300,function(){ $(this).css('display','none'); $("#partner-cont").css('display','inline-block')});
        })
        function applyBehaviors(){
            $('.numerical').blur(function(){
                if($(this).val().length > 0){
                    if(isNaN($(this).val())){
                        console.log('bad news bears');
                        if($(this).parent().find('.warning').length == 0)
                            $(this).parent().append("<span class='warning'>Non-numerical input.</span>")
                    }
                    else{
                        $(this).parent().find(".warning").remove()
                        console.log('we gucci')
                    }        
                }
            })
            $('.cancel').click(function(){
                $(this).parent().remove();
            })
        }
        function hIndex(arr){
            arr = arr.sort(function(a,b){ return b-a; })
            var i = 1;
            return 0;
        }
        $('#partners-add').click(function(){
            partnerNumber++;
            $('#partners').append("<li><i class='fa fa-times-circle cancel' aria-hidden='true'></i>Partner "+partnerNumber+"<input class='encounters numerical' type='text' placeholder='#' maxlength='2'/>")
            applyBehaviors();
        })
    </script>
</html>
